<!DOCTYPE html>
<html>
<head>
	<title>弹框</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./assets/css/reset.css">
	<link rel="stylesheet" type="text/css" href="./assets/css/index.css">
	<script type="text/javascript" src="./assets/js/jquery.min.js"></script>
	<script type="text/javascript" src="./assets/js/setRem.js"></script>
	<script type="text/javascript" src="./assets/js/rem.min.js"></script>
</head>
<body>
	<button style="display:block;width: 200px;height: 50px;margin: 30px auto;" id="searchBtn">简易搜索</button>

	<div class="cover"></div>
	<div class="easySearch">
		<p class="search-head">简易搜索</p>
		<div class="search-box">
			<span class="search-btn"><img src="./assets/img/search.png">筛选</span>
			<ul id="easySearch-ul">
				<li class="active">基础信息</li>
				<li>民警信息</li>
				<li>医疗卫生</li>
				<li>奖励情况</li>
				<li>违纪情况</li>
				<li>年度经费</li>
				<li>深挖犯罪</li>
				<li>装备配套</li>
				<li>信息化应用</li>
				<li>防逃脱设备配套</li>
				<li>基础信息</li>
				<li>民警信息</li>
				<li>医疗卫生</li>
				<li>奖励情况</li>
				<li>违纪情况</li>
				<li>年度经费</li>
				<li>深挖犯罪</li>
				<li>装备配套</li>
				<li>信息化应用</li>
				<li>防逃脱设备配套</li>
				<li>基础信息</li>
				<li>民警信息</li>
				<li>医疗卫生</li>
				<li>奖励情况</li>
				<li>违纪情况</li>
				<li>年度经费</li>
				<li>深挖犯罪</li>
				<li>装备配套</li>
				<li>信息化应用</li>
				<li>防逃脱设备配套</li>
			</ul>
			<p class="switch"><span class="text">显示全部</span><img src="./assets/img/arrow.png" class="bgImg"></p>
		</div>
	</div>

	<div class="selectWindow">
		<span class="closeBtn"><img src="./assets/img/closeBtn.png"></span>
		<img src="./assets/img/selectWindow.png" class="selectWindow-bg">
		<div class="selectWindow-head"><span class="content">筛选</span><img src="./assets/img/top.png"></div>
		<div class="selectWindow-body">
			<div class="listBox">
				<dl>
					<dt class="multiple"><span class="title">年份</span></dt>
					<dd>2013年以前</dd>
					<dd>2016年以前</dd>
					<dd>2013年以后</dd>
				</dl>
			</div>
			<div class="listBox">
				<span class="all"><span class="content">全部</span><img src="./assets/img/arrow.png"></span>
				<dl>
					<dt class="multiple"><span class="title">日期</span></dt>
					<dd>最早</dd>
					<dd>最晚</dd>
					<dd>2000-1-1之前</dd>
					<dd>2000-1-1之后</dd>
					<dd>2000-1-1之前-2000-1-1之后</dd>
					<dd>2015年1月之后</dd>
					<dd>2015年1月之前</dd>
					<dd>2015年1月之前-2015年1月之后</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl>
					<dt class="multiple"><span class="title">月份</span></dt>
					<dd>2013年1月之前</dd>
					<dd>2013年1月之后</dd>
					<dd>2013年1月至2014年1月</dd>
					<dd>2014年1月至2015年1月</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl>
					<dt class="single"><span class="title">分类</span><span class="tag">(单选)</span></dt>
					<dd>2013年1月之前</dd>
					<dd>2013年1月之后</dd>
					<dd>2013年1月至2014年1月</dd>
					<dd>2014年1月至2015年1月</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl>
					<dt class="multiple"><span class="title">出所原因</span></dt>
					<dd>投送监狱</dd>
					<dd>投送劳动教养所</dd>
					<dd>投送少年管教所</dd>
					<dd>投送安康医院</dd>
					<dd>刑满释放</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl>
					<dt class="multiple"><span class="title">地址</span></dt>
					<dd>不限</dd>
					<dd>广州</dd>
					<dd>东莞</dd>
					<dd>珠海</dd>
					<dd class="other">其他地址<input type="text" name="address"></dd>
				</dl>
			</div>
			<div class="listBox">
				<dl>
					<dt class="multiple"><span class="title">数量</span></dt>
					<dd>不限</dd>
					<dd>1-199</dd>
					<dd>200-699</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl class="checkboxDl">
					<dt class="multiple"><span class="title">复选框</span></dt>
					<dd class="other check"><span class="checkbox"><img src="./assets/img/checkbox-check.png"></span>2010之前</dd>
					<dd class="other"><span class="checkbox"><img src="./assets/img/checkbox-nocheck.png"></span>2011之前</dd>
					<dd class="other"><span class="checkbox"><img src="./assets/img/checkbox-nocheck.png"></span>2012之前</dd>
					<dd class="other"><span class="checkbox"><img src="./assets/img/checkbox-nocheck.png"></span>2013之前</dd>
					<dd class="other"><span class="checkbox"><img src="./assets/img/checkbox-nocheck.png"></span>2014之前</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl class="radioDl">
					<dt class="multiple"><span class="title">单选框</span></dt>
					<dd class="other check"><span class="radio"><img src="./assets/img/radio-check.png"></span>2010之前</dd>
					<dd class="other"><span class="radio"><img src="./assets/img/radio-nocheck.png"></span>2011之前</dd>
					<dd class="other"><span class="radio"><img src="./assets/img/radio-nocheck.png"></span>2012之前</dd>
					<dd class="other"><span class="radio"><img src="./assets/img/radio-nocheck.png"></span>2013之前</dd>
					<dd class="other"><span class="radio"><img src="./assets/img/radio-nocheck.png"></span>2014之前</dd>
				</dl>
			</div>
			<div class="listBox">
				<dl class="selectDl">
					<dt class="multiple"><span class="title">下拉框</span></dt>
					<dd class="other">
						<select>
							<option>请选择</option>
							<option>选项一</option>
						</select>
					</dd>
				</dl>
			</div>
		</div>

		<div class="btnBox">
			<button class="sure"><span>确定</span><img src="./assets/img/sure.png"></button>
			<button class="reset"><span>重置</span><img src="./assets/img/reset.png"></button>
		</div>
	</div>
	<script type="text/javascript">
		$(function() {
			var hmtlH = document.documentElement.clientHeight || document.body.clientHeight;
			console.log(hmtlH)
			setDtHeight(hmtlH);

			//简易搜索的列表点击事件
			$("#easySearch-ul li").each(function(index,el){
				$(el).click(function(){
					$("#easySearch-ul li").removeClass("active");
					$(el).addClass("active");
					alert($(el).text());
				})
			})

			$("#searchBtn").click(function(){
				$(".cover").show();
				$(".easySearch").show();
			})

			//简易搜索的显示全部与收起事件
			$(".switch").click(function(){
				var txt = $(".switch .text").text();			
				if(txt == "显示全部"){
					$(".search-box ul").css("maxHeight",hmtlH/7.6*10086);
					$(".switch .text").text("收起全部");
				}else{
					$(".search-box ul").css("maxHeight",hmtlH/7.6*1.05);
					$(".switch .text").text("显示全部");
				}			
			})
			
			$(".search-btn").click(function(){
				$(".selectWindow").fadeIn();
			})

			$(".selectWindow .closeBtn").click(function(){
				$(".selectWindow").fadeOut();
			})

			//筛选框每个列表的显示全部及收起事件
			$(".listBox .all").click(function(){
				var txt = $(this).text();			
				if(txt == "全部"){
					$(this).next().css("maxHeight",hmtlH/7.6*10086);
					setDtHeight(hmtlH);
					$(this).find(".content").text("收起");
				}else{
					$(this).next().css("maxHeight",hmtlH/7.6*0.5);
					setDtHeight(hmtlH);
					$(this).find(".content").text("全部");
				}
			})
			//筛选框各个列表的选择事件
			$(".listBox dl").each(function(index,el){
				var cls = $(el).find("dt").attr("class");
				var dlCls = $(el).attr("class");	
				$(el).find("dd").each(function(index1,el1){
					$(el1).click(function(){
						var ddCls = $(el1).attr("class");
						if (ddCls == undefined) {
							ddCls = "";
						}
						if (ddCls.indexOf("other") == -1) {
							if (cls == "multiple") {
								if (ddCls.indexOf("active") > -1) {
									$(el1).removeClass("active");
								}else{
									$(el1).addClass("active");
								}
							}else if(cls == "single"){
								if (ddCls.indexOf("active") > -1) {
									$(el1).removeClass("active");
								}else{
									$(el1).parent().find("dd").removeClass("active");
									$(el1).addClass("active");
								}
							}
						}else{
							if (dlCls !=undefined) {							
								if (dlCls.indexOf("checkboxDl") > -1) {
									if (ddCls.indexOf("check") > -1) {
										$(el1).find("img").prop("src","./assets/img/checkbox-nocheck.png");
										$(el1).removeClass("check");
									}else{
										$(el1).find("img").prop("src","./assets/img/checkbox-check.png");
										$(el1).addClass("check");
									}
								}else if (dlCls.indexOf("radioDl") > -1) {
									if (ddCls.indexOf("check") > -1) {
										$(el1).find("img").prop("src","./assets/img/radio-nocheck.png");
										$(el1).removeClass("check");
									}else{
										$(el1).parent().find("img").prop("src","./assets/img/radio-nocheck.png");
										$(el1).parent().find("dd").removeClass("check");
										$(el1).find("img").prop("src","./assets/img/radio-check.png");
										$(el1).addClass("check");
									}
								}else{
									return false;
								}
							}else{
								return false;
							}
						}
					})
				})
			})
			//筛选框确定事件
			$(".selectWindow .sure").click(function(){
				alert('sure');
				$(".selectWindow dl").each(function(index,el){
					var text = "";
					text += $(el).find("dt").text() + ":";
					if ($(el).find("dd.active").text()) {
						$(el).find("dd.active").each(function(childIndex,childEl){
							text += $(childEl).text() + ",";
						})
					}
					if ($(el).find("dd.check").text()) {
						$(el).find("dd.check").each(function(childIndex,childEl){
							text += $(childEl).text() + ",";
						})
					}
					if ($(el).find("input").val()) {
						text += $(el).find("input").val() + ",";
					}
					if ($(el).find("select").val()) {
						text += $(el).find("select").val() + ",";
					}
					console.log(text);
				})
			})
			//重置筛选狂的选择
			$(".selectWindow .reset").click(function(){
				$(".selectWindow dd").removeClass("active");
				$(".selectWindow dd").removeClass("check");
				$(".checkboxDl img").prop("src","./assets/img/checkbox-nocheck.png");
				$(".radioDl img").prop("src","./assets/img/radio-nocheck.png");
				$(".selectWindow input").val("");
				$(".selectDl select").val("请选择");
			})
		})
	
		//设置dt高度为dl的高度
		function setDtHeight(hmtlH){
			$(".selectWindow dt").each(function(index,el){
				var height = $(el).parent().height();
				console.log(height)
				if(height == 0){
					height = hmtlH/7.6*0.5;
				}
				$(el).css("height",height);
			})
		}
	</script>
</body>
</html>